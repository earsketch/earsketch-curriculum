[[customfunctionssongstructure]]
== Benutzerdefinierte Funktionen und Songstruktur

:nofooter:

The song structure is the song's organization over time. The goal is to create meaningful sections and transitions for the flow of your music. In this chapter, you'll create your own function, custom functions, to structure your songs!

[[asongsstructure]]
=== A song's structure

:nofooter:

A song can be divided into *sections*. A section is made up of several measures (musical time units), and it expresses an idea or feeling. Usually, musicians try to add contrast between different sections. _Intro, Verse, Chorus_, and _Outro_ are examples of sections.

A common and simple *form*, or song structure, is ABA. A and B are two different sections, for example chorus and verse. The B section adds variety, while returning to the A section invokes familiarity. The code below creates an ABA form. Section B features contrasting sounds to Section A - a slower and louder bass, and an additional rattling:

[[imediau2sections_052016png]]
.An ABA form within the EarSketch DAW
[caption="Figure 9.2: "]
image::../media/U2/sections_052016.png[Alt Text]

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-a-b-a-form.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-a-b-a-form.js.txt[]
----

{nbsp} +

.PRACTICE
****
Select a song that you like. Listen to it and try to notice the different sections. Can you tell when the musicians change sections? How many times do you hear the chorus and verse? What kind of contrasts can you observe? Share your example with your neighbor.
****

Keep in mind that a musical phrase sounds most natural when sounds are arranged into groups of two, four, eight, sixteen, etc. So your sections should preferably have a size of two, four, eight, or sixteen measures.

[[creatingyourcustomfunctions]]
=== Create your custom functions

In the previous example with the ABA song, the code is large, and the code is repeated for the second A section. There is a way to be more concise, thanks to *custom functions*! We will define a function that will represent section A, then call the function twice.

The difference with functions that you have used like `fitMedia()`, is that `fitMedia()` is already pre-defined by our team to play a sound. In a custom function, you get to define exactly what it does. Here is how you would define section A:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-untitled1.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-untitled1.js.txt[]
----

. `sectionA()` is the name we chose for our function. You can choose any name you like. Try to name your function in a descriptive way so your code is easier to read.
. The instructions are the *body* of the function. They are indented.

.PRACTICE
****
Paste this code in a new script, and run it. You should see that your DAW remains empty.
That's because you need to *call* a function to use it.
To call your function, add the line `sectionA()`, unindented, after your function definition. When running the code, you should see section A in your DAW
****

Now we want to add section A from measures nine to thirteen. However, when we call `sectionA()`, the sounds are placed from measures one to five. To remedy this issue, we will create *parameters* for our function.

.PRACTICE
****
In your current script you created for the previous practice problem:

1. Add the parameters `startMeasure` and `endMeasure` separated by a comma between the parentheses of the sectionA function in its definition like this: `sectionA(startMeasure,endMeasure)`.
1. In the function's body, replace the start measure (`1`) and end measure (`5`) by `startMeasure` and `endMeasure` respectively.
1. When you call your function, add the parameters `1` and `5` between the parentheses. Run the code to make sure there is no error.
1. Add a second function call, this time with the parameters `9` and `13`. Run the code to make sure there is no error.
1. Definiere eine Funktion für Abschnitt B nach demselben Verfahren und rufe Abschnitt B von Takt fünf bis neun und von Takt dreizehn bis siebzehn auf.
****

Hier ist, wie dein Code aussehen könnte:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-a-b-a-b-form-and-custom-functions.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-a-b-a-b-form-and-custom-functions.js.txt[]
----

//The following video will be cut in 2 with the beginning going to chapter 7.1, and the end to this chpater. For more info see https://docs.google.com/spreadsheets/d/114pWGd27OkNC37ZRCZDIvoNPuwGLcO8KM5Z_sTjpn0M/edit#gid=302140020//

[role="curriculum-python curriculum-mp4"]
[[video93py]]
video::./videoMedia/009-03-CustomFunctions-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video93js]]
video::./videoMedia/009-03-CustomFunctions-JS.mp4[]

[[transitionstrategies]]
=== Übergangsstrategien

Jetzt, wo du weißt, wie du benutzerdefinierte Funktionen zur Strukturierung deines Songs erstellen kannst, wollen wir uns die Übergänge ansehen. *Übergänge* helfen einem Abschnitt reibungslos in den nächsten zu gehen. Sie können Strophe und Refrain verbinden, zu einem Drop aufbauen, zwischen Tracks mischen (DJing) oder die Tonart wechseln. Das Ziel eines Übergangs ist es, die Aufmerksamkeit des Zuhörers auf sich zu nehmen und ihm eine kommende Veränderung mitzuteilen.

Im Folgenden findest du einige beliebte Strategien zur Gestaltung musikalischer Übergänge:

. *Crash Cymbal*: Platziere eine Crash-Cymbal auf den ersten Schlag eines neuen Abschnitts.
. *Drum Fill*: Eine rhythmische Variation, um die Lücke vor einem neuen Abschnitt zu füllen.
. *Track Silencing*: Schaltet einige Tracks für einen dramatischen Effekt vorübergehend stumm.
. *Melody Variation*: Einführung einer Variation der Akkorde, Basslinie oder Melodie vor dem neuen Abschnitt. Oft enthält ein Ordner innerhalb der EarSketch Soundbibliothek Variationen eines ähnlichen Riffs.
. *Steigerung*: Eine Note oder ein Geräusch, das in der Höhe zunimmt. Es ist sehr häufig in EDM (Electronic Dance Music) und schafft eine Vorfreude auf einen Drop. Sie können den Suchbegriff "riser" im Sound-Browser verwenden. Eine umgekehrte Crash-Zymbal kann als Riser verwendet werden, wie YG_EDM_REVERSE_CRASH_1.
. *Snare Roll*: Eine Folge wiederholter Snare Hits, mit zunehmender Dichte, Tonhöhe oder Amplitude. Du kannst einen Sound wie RD_FUTURE_DUBSTEP_FILL_1 oder HOUSE_BREAK_FILL_003 oder mit `makeBeat()` verwenden.
. *Looping*: Wiederholen eines kurzen Melodie-Segments vor einem neuen Abschnitt.
. *Crossfading*: Das Volumen eines Abschnitts wird verringert, während das Volumen eines neuen Abschnitts erhöht wird.
. *Anacrusis*: Wenn die Melodie der neuen Sektion beginnt, schlagen ein paar beats frühzeitig.

.PRACTICE
****
Wähle aus der Liste der möglichen Übergänge zwei aus und überlege dir, wie du sie mit Code umsetzen kannst. Du kannst mit einem Partner arbeiten. Sobald du darüber nachgedacht hast, kannst du dir die folgenden Beispiele ansehen.

Der Übergang sollte ein oder zwei Maßnahmen vor dem neuen Abschnitt platziert werden. Du kannst mehrere Übergangstechniken gleichzeitig benutzen.
****

Drum fills:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-drum-fill.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-drum-fill.js.txt[]
----

Die Technik des Track Silencing erfordert nur die Änderung einiger `fitMedia()`-Aufrufe. Ein Beispiel wird unten gezeigt.

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-track-droupouts.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-track-droupouts.js.txt[]
----

Im nächsten Beispiel werden während des Übergangs mehrere Riser und ein crash cymbal verwendet.

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-risers.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-risers.js.txt[]
----

{nbsp} +

[[yourfullsong]]
=== Dein gesamter Song

Beim Programmieren können wir *Abstraktionen* schaffen, die Bündelung von Ideen zu einem einzigen Konzept. In der Musik gruppieren wir musikalische Ideen in Abschnitte. Funktionen sind eine Art Abstraktion, die in der Informatik verwendet wird. Sie packen mehrere Anweisungen in ein Werkzeug, so dass sie leicht referenziert werden können. Abstraktionen können die Form eines Programms klarer machen.

.PRACTICE
****
Erstellen wir ein komplettes Lied mit allen Werkzeugen die du in EarSketch entdeckt hast! Hier ist ein Vorschlag zur Vorgehensweise, aber du kannst ihn nach Belieben anpassen:

. Wähle ein Thema für deinen Song. Denke an die Art von Klängen, Instrumenten oder Songtexten, die deine Nachricht am besten vermitteln.
. Wähle dann eine einfache Struktur.
. Und dann, starte die Programmierung! Beginne mit einigen `fitMedia()` Funktionen, um Sounds auszuwählen.
. Benutze `makeBeat()` um Percussion hinzuzufügen.
. Du kannst deine eigenen Sounds hochladen.
. Benutze `for` Loops, um Wiederholung in deinem Code zu reduzieren.
. Verwende benutzerdefinierte Funktionen, um deine Abschnitte zu definieren und deine Songstruktur zu erstellen.
. Füge ein oder zwei sinnvolle Übergänge hinzu.
. Füge Effekte mit `setEffect()` hinzu.
. Füge eine oder mehrere bedingte Anweisungen hinzu.
. Du solltest darauf achten, dass du Variablen verwendest, um Informationen wie z.B. Klangkonstanten zu speichern.
. Achte darauf, dass du Kommentare verwendest, um zu erklären, was du tust.
. Vergiss nicht, regelmäßig deinen Code auszuführen und deinen Song zu hören. Auf diese Weise kannst du ihn ändern, bis er dir gefällt.
. Wähle einen Namen für deinen Song.
****

Hier ist ein Beispiel für einen vollständigen Song:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-total-atlanta-song-of-summer.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-total-atlanta-song-of-summer.js.txt[]
----

In diesem Beispiel haben wir eine `for` Schleife in einer benutzerdefinierten Funktion verwendet! Wir haben Parameter der Funktion (`start` und `end`) innerhalb der for-Schleife verwendet.

[[chapter7summary]]
=== Zusammenfassung von Kapitel 7

* *Abschnitte* sind verwandte musikalische Einheiten, die aus mehreren Takten bestehen. Jeder drückt eine Idee oder ein Gefühl aus.
* *Transitions* sind Passagen der Musik, die verwendet werden, um aufeinander folgende Musikabschnitte zu verbinden.
* Die Struktur und Vielfalt eines Liedes wird als seine *Form* bezeichnet. Eine übliche musikalische Form ist A-B-A.
* *Benutzerdefinierte Funktionen* sind einzigartige Funktionen, die vom Programmierer geschrieben werden, um eine bestimmte Aufgabe zu erfüllen. Du musst eine benutzerdefinierte Funktion erstellen, um sie aufrufen zu können. Du kannst beliebig viele Parameter erstellen.
* Eine *Abstraktion* ist das Bündeln von Ideen zu einem einzelnen, oft weniger komplexen Konzept. Funktionen sind ein Beispiel für Abstraktion.

[[chapter-questions]]
=== Fragen

[question]
--
Was davon ist NICHT ein Beispiel für eine musikalische Sektion?

[answers]
* Drums
* Intro
* Vers
* Chorus
--

[question]
--
Was ist eine Abstraktion?

[answers]
* Eine Bündelung von Ideen zu einem einzigen Konzept
* Eine Vielzahl von Klängen in verschiedenen Bereichen
* Teile eines Liedes, die miteinander in Beziehung stehen, sich aber auch voneinander unterscheiden
* Eine Anweisung, die einen Wert an den Funktionsaufruf zurückgibt
--

[role="curriculum-python"]
[question]
--
Welche dieser Optionen definiert die Funktion `myFunction()` mit den Parametern `startMeasure` und `endMeasure` richtig ?

[answers]
* `def myFunction(startMeasure, endMeasure):`
* `def myFunction():`
* `myFunction(startMeasure, endMeasure):`
* `myFunction(2, 5)`
--

[role="curriculum-javascript"]
[question]
--
Welche dieser Optionen definiert die Funktion `myFunction()` mit den Parametern `startMeasure` und `endMeasure` richtig ?

[answers]
* `function myFunction(startMeasure, endMeasure) {}`
* `funktion myFunction() {}`
* `myFunction(startMeasure, endMeasure){}`
* `myFunction(2, 5)`
--

[question]
--
Welches ist NICHT ein Beispiel für einen Übergang?

[answers]
* Melody Consistency
* Crash Cymbal
* Riser
* Track Silencing
--