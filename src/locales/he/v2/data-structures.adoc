[[getorganizedwithdatastructures]]
== ארגון הקוד בעזרת מבני נתונים
:nofooter:

[role="curriculum-python"]
לרשותנו כלים רבים ליצירת שירים ב-EarSketch. הסקריפטים שכתבנו עלולים להיות מאוד ארוכים. בפרק זה תלמדו איך לארגן את הקוד, בעיקר בעזרת רשימות (lists) ופונקציונליות חדשה של `()makeBeat`.

[role="curriculum-javascript"]
לרשותנו כלים רבים ליצירת שירים ב-EarSketch. הסקריפטים שכתבנו עלולים להיות מאוד ארוכים. בפרק זה תלמדו איך לארגן את הקוד, בעיקר בעזרת מערכים (arrays) ופונקציונליות חדשה של `()makeBeat`.

[[datastructures]]
=== מבני נתונים

[role="curriculum-python"]
רשימות ארוכות של משתנים שמאחסנים צלילים, אפשר לארגן ביעילות בעזרת *רשימות (lists)*. *רשימה*, שנקראת מערך (array) בשפות תכנות מסוימות, היא אוסף של ערכים, או *אלמנטים*, בתוך סוגריים מרובעים (`[]`) המופרדים על-ידי פסיקים. הנה דוגמה:

[role="curriculum-javascript"]
רשימות ארוכות של משתנים שמאחסנים צלילים, אפשר לארגן ביעילות בעזרת *מערכים (arrays)*. *מערך*, שנקרא רשימה (list) בשפות תכנות מסוימות, היא אוסף של ערכים, או *איברים*, בתוך סוגריים מרובעים (`[]`) המופרדים על-ידי פסיקים. הנה דוגמה:

[role="curriculum-python"]
[source,python]
----
# Instead of writing this:
kick = OS_KICK03
hihat = OS_OPENHAT01
snare = OS_SNARE05

# You can write this:
drums = [OS_KICK03, OS_OPENHAT01, OS_SNARE05]
----

[role="curriculum-javascript"]
[source,javascript]
----
// Instead of writing this:
var kick = OS_KICK03;
var hihat = OS_OPENHAT01;
var snare = OS_SNARE05;

// You can write this:
var drums = [OS_KICK03, OS_OPENHAT01, OS_SNARE05];
----

[role="curriculum-python"]
לאחר החלפת משתנים ברשימה, כיצד נתן לגשת לתוכן הרשימה? על-ידי שימוש באינדקסים. לכל איבר ברשימה יש אינדקס, החל מ-`0`. בדוגמה הקודמת, `drums[0]` מכיל את הקליפ `OS_KICK03`, `drums[1]` מכיל את הקליפ `OS_OPENHAT01` ו-`drums[3]` מכיל את הקליפ OS_SNARE05.

[role="curriculum-javascript"]
לאחר החלפת משתנים במערך, כיצד נתן לגשת לתוכן המערך? על-ידי שימוש באינדקסים. לכל איבר במערך יש אינדקס, החל מ-`0`. בדוגמה הקודמת, `drums[0]` מכיל את הקליפ `OS_KICK03`, `drums[1]` מכיל את הקליפ `OS_OPENHAT01` ו-`drums[3]` מכיל את הקליפ OS_SNARE05.

.תרגלו
****
צרו מערך המכיל שלושה שמות של קליפים.
השתמשו בשלוש קריאות ל-`()fitMedia` כדי למקם את שלושת הקליפים בשלושת הערוצים הראשונים, מתיבה אחת יעד תיבה חמש.
****

הנה דוגמה:

[role="curriculum-python"]
[source,python]
----
# Lists: Using a list to hold several audio clips

# Setup
from earsketch import *
setTempo(130)

# Music

# Creating a list of clips
myEnsemble = [RD_ROCK_POPRHYTHM_MAINDRUMS_12, RD_ROCK_POPELECTRICBASS_16, RD_ROCK_POPELECTRICLEAD_11]

# Placing sounds from measure 1 to 5
fitMedia(myEnsemble[0], 1, 1, 5)  # accessing index 0
fitMedia(myEnsemble[1], 2, 1, 5)  # accessing index 1
fitMedia(myEnsemble[2], 3, 1, 5)  # accessing index 2
----

[role="curriculum-javascript"]
[source,javascript]
----
// Arrays: Using an array to hold several audio clips

// Setup
setTempo(130);

// Music

// Creating an array of clips
var myEnsemble = [RD_ROCK_POPRHYTHM_MAINDRUMS_12, RD_ROCK_POPELECTRICBASS_16, RD_ROCK_POPELECTRICLEAD_11];

// Placing sounds from measure 1 to 5
fitMedia(myEnsemble[0], 1, 1, 5); // accessing index 0
fitMedia(myEnsemble[1], 2, 1, 5); // accessing index 1
fitMedia(myEnsemble[2], 3, 1, 5); // accessing index 2
----

[[Graphic]]
//.The EarSketch Share window for collaboration (Let Others Edit)
//[caption="Figure 21.4.2: "]
image::../media/U3/18_1_Graphics_ES.jpg[Alt Text]

[role="curriculum-python"]
ראינו כיצד `list[index]` מתייחס לאיבר של הרשימה. אפשר להשתמש בביטוי זה כדי לשנות איבר של הרשימה. לדוגמה: `myEnsemble[0] = RD_ROCK_POPRHYTHM_MAINDRUMS_11` בדוגמה הקודמת, ישנה את האיבר הראשון של הרשימה ל-`RD_ROCK_POPRHYTHM_MAINDRUMS_11`. זה דומה לעדכון ערך משתנה, שגם בו השתמשנו *באופרטור ההשמה* `=`.

[role="curriculum-javascript"]
ראינו כיצד `array[index]` מתייחס לאיבר של המערך. אפשר להשתמש בביטוי זה כדי לשנות איבר של המערך. לדוגמה: `myEnsemble[0] = RD_ROCK_POPRHYTHM_MAINDRUMS_11` בדוגמה הקודמת, ישנה את האיבר הראשון של המערך ל-`RD_ROCK_POPRHYTHM_MAINDRUMS_11`. זה דומה לעדכון ערך משתנה, שגם בו השתמשנו *באופרטור ההשמה* `=`.

.תרגלו
****
שנו את הדוגמה הקודמת, כך שתשתמש בלולאה כדי להימנע מקריאה לפונקציה`fitMedia()` שלוש פעמים. השתמשו במספר הערוץ כמונה הלולאה.
האינדקס חייב להתחיל ב-`0`, בעוד מספר הערוץ מתחיל ב-`1`. בתוך הלולאה צרו משתנה שיהווה `אינדקס` שערכו מספר הערוץ פחות אחת.
****

למטה ישנה דוגמה. הסתכלו בקונסול וראו מה הסקריפט מדפיס בזמן הריצה.

[role="curriculum-python"]
[source,python]
----
# Iterating through Lists: Using a list to hold several audio clips and placing them in our DAW thanks to a for loop

# Setup
from earsketch import *
setTempo(130)

# Music

# Creating a list of clips
myEnsemble = [RD_ROCK_POPRHYTHM_MAINDRUMS_12, RD_ROCK_POPELECTRICBASS_16, RD_ROCK_POPELECTRICLEAD_11]

# Going through the list
for track in range(1, 4):
    index = track - 1
    fitMedia(myEnsemble[index], track, 1, 5)
    print("this iteration, track = " + str(track) + " and index = " + str(index))
----

[role="curriculum-javascript"]
[source,javascript]
----
// Iterating through Arrays: Using an array to hold several audio clips and placing them in our DAW thanks to a for loop

// Setup
setTempo(130);

// Music

// Creating an array of clips
var myEnsemble = [RD_ROCK_POPRHYTHM_MAINDRUMS_12, RD_ROCK_POPELECTRICBASS_16, RD_ROCK_POPELECTRICLEAD_11];

for (var track = 1; track < 4; track++) {
    var index = track - 1;
    fitMedia(myEnsemble[index], track, 1, 5);
    println("this iteration, track = " + track + " and index = " + index);
}
----

[role="curriculum-python"]
טיפ מועיל: הפונקציה ()len, עם שם הרשימה (list) כפרמטר, מחזירה את מספר איברי הרשימה. כך ש-`list[0]` הוא האיבר הראשון של `list`, ו- `list[len(list)-1]` הוא האיבר האחרון שלה. לדוגמה, אם `list = ["Hello","fellow","EarSketchers"]`, אז `len(list)` מחזירה `3`. האינדקסים הם `0`, `1` ו-`2`. האינדקס האחרון הוא 2 = 3-1.

[role="curriculum-javascript"]
טיפ מועיל: ערך התכונה `length` (`array.length`) הוא מספר האיברים במערך. כך ש-`array[0]` הוא האיבר הראשון של `array`, ו- `array[array.length-1]` הוא האיבר האחרון שלו. לדוגמה, אם `array = ["Hello","fellow","EarSketchers"]`, אז ערכה של `array.length` הוא `3`. האינדקסים הם `0`, `1` ו-`2`. האינדקס האחרון הוא 2 = 3-1.

[role="curriculum-python"]
.תרגלו
****
ניצור פתיחה לשיר ב-EarSketch בה כלים (ערוצים) יתווספו למוסיקה אחד אחד לאורך זמן. לדוגמה, הערוץ הראשון יתחיל בתיבה הראשונה, הערוץ השני יתחיל בתיבה השנייה וכו'. הדרגה בהוספה שימושית בפתיחה של שיר. למשל, שירו של https://www.youtube.com/watch?v=L53gjP-TtGEKanye[Kanye West's "Power"^].
בעזרת לולאה ורשימה, צרו פתיחה כזו מתיבה אחת עד חמש. כמו בדוגמה הקודמת, תוכלו להשתמש ב-`track` כמונה, ובמשתנה נוסף `כאינדקס`. בנוסף, תוכלו ליצור משתנה בשם `measure`.
השתמשו בפונקציה `()len`.
****

[role="curriculum-javascript"]
.תרגלו
****
ניצור פתיחה לשיר ב-EarSketch בה כלים (ערוצים) יתווספו למוסיקה אחד אחד לאורך זמן. לדוגמה, הערוץ הראשון יתחיל בתיבה הראשונה, הערוץ השני יתחיל בתיבה השנייה וכו'. הדרגה בהוספה שימושית בפתיחה של שיר. למשל, שירו של https://www.youtube.com/watch?v=L53gjP-TtGEKanye[Kanye West's "Power"^].
בעזרת לולאה ומערך, צרו פתיחה כזו מתיבה אחת עד חמש. כמו בדוגמה הקודמת, תוכלו להשתמש ב-`track` כמונה, ובמשתנה נוסף `כאינדקס`. בנוסף, תוכלו ליצור משתנה בשם `measure`.
השתמשו בתכונה `length`.
****

הנה דוגמה:

[role="curriculum-python"]
[source,python]
----
# Additive Introduction: Creating an additive introduction with list iteration

# Setup
from earsketch import *
setTempo(120)

# Music
introSounds = [HIPHOP_DUSTYGROOVE_003, TECHNO_LOOP_PART_006, HOUSE_SFX_WHOOSH_001, TECHNO_CLUB5THPAD_001]

for measure in range(1, len(introSounds) + 1):
    # we add 1 to len(introSounds) since the second argument of range is exclusive
    index = measure - 1  # zero-based list index
    track = measure  # change track with measure
    fitMedia(introSounds[index], track, measure, 5)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Additive Introduction: Creating an additive introduction with array iteration

// Setup
setTempo(120);

// Music
var introSounds = [HIPHOP_DUSTYGROOVE_003, TECHNO_LOOP_PART_006, HOUSE_SFX_WHOOSH_001, TECHNO_CLUB5THPAD_001];

for (var measure = 1; measure < introSounds.length + 1; measure++) {
    // we add 1 to introSounds.length since we want measure to go up to introSounds.length
    var index = measure - 1; // zero-based array index
    var track = measure; // change track with measure
    fitMedia(introSounds[index], track, measure, 5);
}
----

[[usingdatastructureswithmakebeat]]
=== שימוש במבני נתונים עם `()makeBeat`

[role="curriculum-python"]
נראה שתי דרכים לשימוש במבני נתונים עם `()makeBeat`. ראשית, נראה עד כמה דומות מחרוזות ורשימות:

[role="curriculum-javascript"]
נראה שתי דרכים לשימוש במבני נתונים עם `()makeBeat`. ראשית, נראה עד כמה דומים מערכים ומחרוזות:

[role="curriculum-python"]
1. כמו לרשימות, גם למחרוזות יש אינדקסים. *האינדקס* מייצג את מיקום התו (character) במחרוזת, החל מ-0. לדוגמה, ערכו של`[3]"Sarah"` הוא`a`.
2. אפשר להשתמש בפונקציה `()len` עם מחרוזות, והיא תחזיר את מספר התווים במחרוזת. התו האחרון נמצא באינדקס`len(string)-1`.
האינדקסים במחרוזת `"EarSketch"` מוצגים בטבלה הבאה.


[cols="h,^,^,^,^,^,^,^,^,^"]
|===
|תו
|E
|a
|r
|S
|k
|e
|t
|c
|h

|אינדקס
|0
|1
|2
|3
|4
|5
|6
|7
|8
|===

[role="curriculum-javascript"]
1. כמו למערכים, גם למחרוזות יש אינדקסים. *האינדקס* מייצג את מיקום התו (character) במחרוזת, החל מ-0. לדוגמה, ערכו של`[3]"Sarah"` הוא`a`.
2. אפשר להשתמש בתכונה (attribute) `length.` עם מחרוזות, והיא תחזיר את מספר התווים במחרוזת. התו האחרון נמצא באינדקס`string.length-1`.
האינדקסים במחרוזת `"EarSketch"` מוצגים בטבלה הבאה.

[cols="h,^,^,^,^,^,^,^,^,^"]
|===
|תו
|E
|a
|r
|S
|k
|e
|t
|c
|h

|אינדקס
|0
|1
|2
|3
|4
|5
|6
|7
|8
|===



[role="curriculum-python"]
3. אפשר לשרשר רשימות כמו שמשרשרים מחרוזות. שרשור נעשה בעזרת אופרטור השרשור (`+`): התחביר (syntax) הוא `newList = listA + listB`. 

[role="curriculum-javascript"]
3. אפשר לשרשר מערכים כמו שמשרשרים מחרוזות. השרשור נעשה בעזרת `concat` שהיא *פעולה (method)*. פעולה דומה לפונקציה, בכך שיש לה סוגריים המכילים פרמטרים. כדי להשתמש בה, כותבים את שמה אחרי שם המערך ומוסיפים נקודה ביניהם: התחביר (syntax) הוא `newArray = arrayA.concat(arrayB)`. צורת כתיבה זו נקראת *dot-notation*.

[role="curriculum-python"]
4. אפשר לחתוך מחרוזת ולקבל *תת-מחרוזת (substring)*. זה מאפשר לחתוך ביט, טכניקה פופולרית במוסיקה אלקטרונית ורמיקסינג. התחביר (syntax) הוא `newString = oldString[startIndex: endIndex]`. התת-מחרוזת כוללת את התו באינדקס`startIndex`, אבל לא את התו באינדקס `endIndex`. לדוגמה, הערך של `[1,4]"Sarah"` הוא `"ara"`. אפשר לעשות כך גם עם רשימות: `newList = oldList[startIndex: endIndex]`.

[role="curriculum-javascript"]
4. אפשר לחתוך מחרוזת ולקבל *תת-מחרוזת (substring)*. זה מאפשר לחתוך ביט, טכניקה פופולרית במוסיקה אלקטרונית ורמיקסינג. התחביר הוא `newString = oldString.substring(startIndex, endIndex)`. התת-מחרוזת כוללת את התו באינדקס`startIndex`, אבל לא את התו באינדקס `endIndex`.לדוגמה, ערכה של `Sarah".substring(1,4)"` הוא `"ara"`. אפשר לעשות אותו דבר עם מערכים, בעזרת הפעולה (method) `()slice`. התחביר הוא: `newList = oldList.slice(startIndex, endIndex)`. `concat()`, `substring()` ו-`slice()` הן פעולות, וכולן משתמשות ב-dot notation.

[role="curriculum-python"]
.תרגלו
****
בסקריפט חדש:

. צרו ארבעה משתנים: שתי מחרוזות תיפוף (`stringA` ו- `stringB`) ושתי רשימות של קליפים (`soundsA` ו- `soundsB`).
. הדפיסו את התו השני של כל מחרוזת.
. הדפיסו את האיבר האחרון של כל רשימה.
. צרו והדפיסו את `stringC`, השרשור של `stringA` ו- `stringB`.
. צרו והדפיסו את `soundsC`, השרשור של `soundsB`, `soundsA` ושוב`soundsA`.
. צרו והדפיסו `stringD`, תת-מחרוזת של`stringC` מהתו השני עד התו החמישי (כולל).
. צרו והדפיסו את `soundsD`, תת-רשימה של `soundC` מאיבר השלישי ועד האחרון (כולל).
****

[role="curriculum-javascript"]
.תרגלו
****
בסקריפט חדש:

. צרו ארבעה משתנים: שתי מחרוזות תיפוף (`stringA` ו- `stringB`) ושני מערכים של קליפים (`soundsA` ו- `soundsB`).
. הדפיסו את התו השני של כל מחרוזת.
. הדפיסו את האיבר האחרון של כל מערך.
. צרו והדפיסו את `stringC`, השרשור של `stringA` ו- `stringB`.
. צרו והדפיסו את `soundsC`, השרשור של `soundsB`, `soundsA` ושוב`soundsA`.
. צרו והדפיסו `stringD`, תת-מחרוזת של`stringC` מהתו השני עד התו החמישי (כולל).
. צרו והדפיסו את `soundsD`, תת-רשימה של `soundC` מאיבר השלישי ועד האחרון (כולל).
****

הנה דוגמה לפתרון:

[role="curriculum-python"]
[source,python]
----
# String and Lists Operations: Showing what we can do with lists and strings

# Setup
from earsketch import *
setTempo(120)

# Creating my beat strings and arrays
stringA = "0+++----0+++--0+"
stringB = "0-0-0-0-----0-0-"
soundsA = [RD_FUTURE_DUBSTEP_MAINBEAT_1, RD_FUTURE_DUBSTEP_BASSWOBBLE_2, RD_POP_SFX_NOISERHYTHM_1]
soundsB = [YG_GOSPEL_GUITAR_2, YG_GOSPEL_ORGAN_2]

# Print the second character of each string.
print(stringA[1])
print(stringB[1])

# Print the last element of your arrays.
print(soundsA[len(soundsA) - 1])
print(soundsB[len(soundsB) - 1])

# Create and print stringC, the concatenation of stringA and stringB.
stringC = stringA + stringB
print(stringC)

# Create and print soundsC, the concatenation your soundsA, soundsB and soundsA again.
soundsC = soundsA + soundsB + soundsA
print(soundsC)

# Create and print stringD, the slice of stringC from the second to the fifth characters included.
stringD = stringC[1:5]
print(stringD)

# Create and print soundsD, the slice of stringC from the third to the last elements included.
soundsD = soundsC[2 : len(soundsC)]
print(soundsD)
----

[role="curriculum-javascript"]
[source,javascript]
----
// String and Arrays Operations: Showing what we can do with arrays and strings
// Setup
setTempo(120);

// Creating my beat strings and arrays
var stringA = "0+++----0+++--0+";
var stringB = "0-0-0-0-----0-0-";
var soundsA = [RD_FUTURE_DUBSTEP_MAINBEAT_1, RD_FUTURE_DUBSTEP_BASSWOBBLE_2, RD_POP_SFX_NOISERHYTHM_1];
var soundsB = [YG_GOSPEL_GUITAR_2, YG_GOSPEL_ORGAN_2];

// Print the second character of each string.
println(stringA[1]);
println(stringB[1]);

// Print the last element of your arrays.
println(soundsA[soundsA.length - 1]);
println(soundsB[soundsB.length - 1]);

// Create and print stringC, the concatenation of stringA and stringB.
var stringC = stringA + stringB;
println(stringC);

// Create and print soundsC, the concatenation your soundsA, soundsB and soundsA again.
var soundsC = (soundsA.concat(soundsB)).concat(soundsA);
println(soundsC);

// Create and print stringD, the slice of stringC from the second to the fifth characters included.
var stringD = stringC.substring(1, 5);
println(stringD);

// Create and print soundsD, the slice of stringC from the third to the last elements included.
var soundsD = soundsC.slice(2, soundsC.lenght);
println(soundsD);
----

דוגמה לשימוש של עיבוד מחרוזות ושל `()makeBeat`:

[role="curriculum-python curriculum-mp4"]
[[video13py]]
video::./videoMedia/013-03-Substrings-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video13js]]
video::./videoMedia/013-03-Substrings-JS.mp4[]

[role="curriculum-python"]
[source,python]
----
# String Operations: Expand a beat string into a longer beat string

# Setup
from earsketch import *
setTempo(120)

# Music
initialBeat = "0+0+00-00+++-0++"
drumInstr = RD_UK_HOUSE_MAINBEAT_10

def expander(beatString):
    newBeat = ""
    for i in range(0, len(beatString)):
        beatSlice = beatString[0:i]
        newBeat = newBeat + beatSlice
    # return the new beat string so it can be used outside the function
    return newBeat

finalBeat = expander(initialBeat)
print(finalBeat)

# makeBeat(drumInstr, 1, 1, initialBeat) # initial beat string
makeBeat(drumInstr, 1, 1, finalBeat)
----

[role="curriculum-javascript"]
[source,javascript]
----
// String Operations: Expand a beat string into a longer beat string

// Setup
setTempo(120);

// Music
var initialBeat = "0+0+00-00+++-0++";
var drumInstr = RD_UK_HOUSE_MAINBEAT_10;

function expander(beatString) {
    var newBeat = "";
    for (var i = 0; i < beatString.length; i = i + 1) {
        beatSlice = beatString.substring(0, i);
        newBeat = newBeat + beatSlice;
    }
    // return the new beat string so it can be used outside the function
    return newBeat;
}

var finalBeat = expander(initialBeat);
println(finalBeat);

// makeBeat(drumInstr, 1, 1, initialBeat); // initial beat string
makeBeat(drumInstr, 1, 1, finalBeat);
----

[role="curriculum-python"]
לסיום, `()makeBeat` יכולה לטפל במספר קליפים בבת-אחת. זה מאפשר למקם את כל כלי ההקשה (percussions) בערוץ אחד בעזרת קריאה אחת לפונקציה`()makeBeat`. במקום להעביר, כפרמטר הראשון, את שם הקליפ, אפשר להעביר רשימה של שמות קליפים. במחרוזת התיפוף, במקום להשתמש רק ב-`0` כדי לנגן קליפ, אפשר להשתמש במספרים מ-`0` עד `9`. המספרים הללו מציינים את האינדקס של הקליפ ברשימת הקליפים. ראו את הדוגמה "לפני ואחרי" שלהלן, עם מקצב ה-"בום פאם בום פאם".

[role="curriculum-javascript"]
לסיום, `()makeBeat` יכולה לטפל במספר קליפים בבת-אחת. זה מאפשר למקם את כל כלי ההקשה (percussions) בערוץ אחד בעזרת קריאה אחת לפונקציה`()makeBeat`. במקום להעביר, כפרמטר הראשון, את שם הקליפ, אפשר להעביר מערך של שמות קליפים. במחרוזת התיפוף, במקום להשתמש רק ב-`0` כדי לנגן קליפ, אפשר להשתמש במספרים מ-`0` עד `9`. המספרים הללו מציינים את האינדקס של הקליפ במערך הקליפים. ראו את הדוגמה "לפני ואחרי" שלהלן, עם מקצב ה-"בום פאם בום פאם".

[role="curriculum-python"]
[source,python]
----
# Making a drum set: Using lists with makeBeat()

# Setup
from earsketch import *
setTempo(100)

# Before, we had one track for every sound (measure 1):
kick = OS_KICK05
snare = OS_SNARE01
kickBeat = "0+++----0+++----"
snareBeat = "----0+++----0+++"
makeBeat(kick, 1, 1, kickBeat)
makeBeat(snare, 2, 1, snareBeat)

# Now, we can combine them (measure 3):
drums = [OS_KICK05, OS_SNARE01]
beat = "0+++1+++0+++1+++"
makeBeat(drums, 1, 3, beat)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Making a drum set: Using arrays with makeBeat()

// Setup
setTempo(100);

// Music
// Before, we had one track for every sound (measure 1):
var kick = OS_KICK05;
var snare = OS_SNARE01;
var kickBeat = "0+++----0+++----";
var snareBeat = "----0+++----0+++";
makeBeat(kick, 1, 1, kickBeat);
makeBeat(snare, 2, 1, snareBeat);

// Now, we can combine them (measure 3):
var drums = [OS_KICK05, OS_SNARE01];
var beat = "0+++1+++0+++1+++";
makeBeat(drums, 1, 3, beat);
----

.תרגלו
****
העתיקו את דוגמת הקוד מפרק 3.4 של ביטים לפי ז'אנר (סוגה). שנו אותה כך שתהיה רק קריאה אחת לפונקציה`()makeBeat` לכל ז'אנר. לפעמים ההיי-האט מנוגן בו זמנית עם הקיק או הסנר. במקרים אלו הוסיפו קריאה ל-`()makeBeat` רק בשביל ההיי-האט.
****

הנה הפתרון:

[role="curriculum-python"]
[source,python]
----
# Examples of beats: Creating beats in different genres

# Setup
from earsketch import *
setTempo(110)

# Sound clips
drums = [OS_KICK05, OS_SNARE01, OS_CLOSEDHAT01]

# Rock beat on measure 1
makeBeat(drums, 1, 1, "0+++1+++0+++1+++")
makeBeat(drums, 2, 1, "2+2+2+2+2+2+2+2+")

# Hip hop beat on measure 3
makeBeat(drums, 1, 3, "0+++1++1+10+1+++")
makeBeat(drums, 2, 3, "2+2+2+2+2+2+2+2+")

# Jazz beat on measure 5
makeBeat(drums, 2, 5, "2++2+22++2+22++2")

# Dembow (latin, caribbean) beat on measure 7
makeBeat(drums, 1, 7, "0++10+1+0++10+1+")
----

[role="curriculum-javascript"]
[source,javascript]
----
// Examples of beats: Creating beats in different genres

// Setup
setTempo(110);

// Sound clips
var drums = [OS_KICK05, OS_SNARE01, OS_CLOSEDHAT01];

// Rock beat on measure 1
makeBeat(drums, 1, 1, "0+++1+++0+++1+++");
makeBeat(drums, 2, 1, "2+2+2+2+2+2+2+2+");

// Hip hop beat on measure 3
makeBeat(drums, 1, 3, "0+++1++1+10+1+++");
makeBeat(drums, 2, 3, "2+2+2+2+2+2+2+2+");

// Jazz beat on measure 5
makeBeat(drums, 2, 5, "2++2+22++2+22++2");

// Dembow (latin, caribbean) beat on measure 7
makeBeat(drums, 1, 7, "0++10+1+0++10+1+");
----

.תרגלו
****
צרו מקצבים (rhythms) עם הפונקציה `()makeBeat` ובעזרת מה שנלמד בשיעור זה. צפו שוב בקטע הווידאו בפרק 3.4 על ביטים לפי ד'אנר (סוגה), אם יש צורך בכך. אל תשכחו, שניתן להריץ את הקוד, לשמוע את הקטע ולתקן בהתאם.
****

[[evaluatingcorrectness]]
=== הערכת נכונות

ברכותינו. רכשתן/ם מיומנויות מוסיקליות ותכנותיות שיאפשרו לכם/ן לכתוב שירים מקוריים ומעניינים עם EarSketch! הדבר האחרון שנרצה לדבר עליו, הוא איך ניתן לוודא שהקוד יהיה מסודר ופשוט ככל האפשר. הנה מספר עצות:

[role="curriculum-python"]
* *תמצות* - צרו קוד קצר המשיג את מטרתו ביעילות. הנה מספר שאלות מנחות, שעוזרות לוודא שהקוד תמציתי:
** האם העתקתי מספר קריאות לאותה פונקציה, אחת אחרי השנייה? (אם כן, ניתן לקצר את הקוד בעזרת לולאה!)
** האם העתקתי את אותו בלוק של קוד מספר פעמים בסקריפט? (אם כן, כדאי להגדיר את הבלוק כפונקציה!)
** האם יש שמות קליפים או ביטויים מתמטיים שחוזרים בקוד? (אם כן, צריך לשים את ערכם במשתנים! לפעמים רשימה יכולה לעזור)
* *בהירות* מתייחסת לאופן בו הקוד מסביר את פעולתו ואת כוונת המתכנת/ת. אם קשה לחבר/ה להבין את הקוד שכתבת, הקוד, כנראה, לא בהיר. הנה מספר שאלות מנחות, שעוזרות לוודא שהקוד בהיר:
** האם יש בקוד הערות פתיחה עם שם הסקריפט, שם המחבר/ת ותיאור? 
** האם שמות המשתנים והפונקציות תיאוריים? (אם לא, יש לשנות את השמות)
** האם יש, בכל בלוק של קוד, הערות המסבירות את הקוד, ביחוד בקטעים שעלולים להיות קשים להבנה?
** האם נעשה שימוש במבנים תכנותיים, כמו פונקציות (המוגדרות על-ידי המתכנת/ת) ולולאות, כדי לארגן את הקוד?
** האם מבנה הסקריפט משקף את מבנה השיר? זה מאפשר קריאה שוטפת של הקוד.

[role="curriculum-javascript"]
* *תמצות* - צרו קוד קצר המשיג את מטרתו ביעילות. הנה מספר שאלות מנחות, שעוזרות לוודא שהקוד תמציתי:
** האם העתקתי מספר קריאות לאותה פונקציה, אחת אחרי השנייה? (אם כן, ניתן לקצר את הקוד בעזרת לולאה!)
** האם העתקתי את אותו בלוק של קוד מספר פעמים בסקריפט? (אם כן, כדאי להגדיר את הבלוק כפונקציה!)
** האם יש שמות קליפים או ביטויים מתמטיים שחוזרים בקוד? (אם כן, צריך לשים את ערכם במשתנים! לפעמים מערך יכול לעזור)
* *בהירות* מתייחסת לאופן בו הקוד מסביר את פעולתו ואת כוונת המתכנת/ת. אם קשה לחבר/ה להבין את הקוד שכתבת, הקוד, כנראה, לא בהיר. הנה מספר שאלות מנחות, שעוזרות לוודא שהקוד בהיר:
** האם יש בקוד הערות פתיחה עם שם הסקריפט, שם המחבר/ת ותיאור? 
** האם שמות המשתנים והפונקציות תיאוריים? (אם לא, יש לשנות את השמות)
** האם יש, בכל בלוק של קוד, הערות המסבירות את הקוד, ביחוד בקטעים שעלולים להיות קשים להבנה?
** האם נעשה שימוש במבנים תכנותיים, כמו פונקציות (המוגדרות על-ידי המתכנת/ת) ולולאות, כדי לארגן את הקוד?
** האם מבנה הסקריפט משקף את מבנה השיר? זה מאפשר קריאה שוטפת של הקוד.

*משוב עמיתים/ות* נפוץ בתכנות ועוזר לשפר את הקוד ואת המוסיקה בעזרת הערות של חבר/ה. משוב חייב להיות *בונה*, כלומר, מעודד ולא "שובר". בנתינת משוב יש להיות:

* *ספציפי/ת* - יש להתייחס לבלוקים ספציפיים, לשורות קוד ספציפיות, לתיבות ספציפיות ולערוצים ספציפיים.
* *תיאורי/ת* - יש לתאר את דרך החשיבה ואת התהליך שיובילו לשיפור השיר.
* *רגיש/ה לחזון ולמטרות של הזולת* - הטעם המוסיקלי שלך לא צריך להיות גורם בהערכת שיר של חבר/ה.
* *חיובי* - בנוסף לדברים הדורשים שיפור, יש לציין גם את החלקים החזקים בקוד ובשיר.
* *לא השוואתי/ת* - יש להתייחס לקוד בפני עצמו ולא בהשוואה או בתחרות מול קוד אחר (שלך או של חבר/ה אחר/ת).

בדומה לכך, בקבלת משוב יש להיות:

* *ספציפי/ת* - יש לציין מהם קטעי הקוד, שורות הקוד, התיבות והערוצים שדורשים, לדעתך, שיפור ועבודה נוספת. זה יקל על מתן משוב שיסייע לשיפור בשיר.
* *קשוב/ה* - יש להמתין לסיום מתן המשוב לפני שתגיב/י עליו. יש להקשיב (באמת להקשיב...) לדברי המשוב. מומלץ לכתוב הערות בקוד המתארות את המשוב. הערות אלה יועילו כשתחזרו לקוד כדי לשפרו.
* *חוקר/ת* - חשוב לשאול שאלות מפורטות על כל עניין שיש בו ספק: לוגיקה, טעויות אפשריות, אחידות מוסיקלית או כל אלמנט אחר.

[role="curriculum-python"]
.תרגלו
****
צרו שיר וקבלו עליו משוב מחבר/ה. הנה מספר רעיונות כדי להתניע את כתיבת השיר:

* מומלץ להחליט על הנושא של השיר ועל המבנה שלו לפני שמתחילים לכתוב את השיר. המבנה יכול להיות פשוט. ABA, למשל. 
* בחרו קליפים ונסו אפשרויות שונות. הגדירו משתנים לצלילים ומחרוזות תיפוף. השתמשו בפונקציות `()fitMedia` ו-`()makeBeat`. תוכלו להעלות צלילים שלכן/ם.
* כשזה מועיל, השתמשו בלולאות והגדירו פונקציות.
* הוסיפו אפקטים בעזרת `()setEffect`.
* השתמשו בהוראת if כדי למקסס (להתאים את הווליום בכל ערוץ).
* בקשו קלט מהמשתמש/ת כדי לשנות משהו בשיר.
* אם יש צורך הכך, השתמשו במערכים.
****

[role="curriculum-javascript"]
.תרגלו
****
צרו שיר וקבלו עליו משוב מחבר/ה. הנה מספר רעיונות כדי להתניע את כתיבת השיר:

* מומלץ להחליט על הנושא של השיר ועל המבנה שלו לפני שמתחילים לכתוב את השיר. המבנה יכול להיות פשוט. ABA, למשל. 
* בחרו קליפים ונסו אפשרויות שונות. הגדירו משתנים לצלילים ומחרוזות תיפוף. השתמשו בפונקציות `()fitMedia` ו-`()makeBeat`. תוכלו להעלות צלילים שלכן/ם.
* כשזה מועיל, השתמשו בלולאות והגדירו פונקציות.
* הוסיפו אפקטים בעזרת `()setEffect`.
* השתמשו בהוראת if כדי למקסס (להתאים את הווליום בכל ערוץ).
* בקשו קלט מהמשתמש/ת כדי לשנות משהו בשיר.
* אם יש צורך הכך, השתמשו במערכים.
****

[[conclusion]]
=== סיכום

תודה רבה על השתתפותכן/ם בהרפתקה של EarSketch! צוות EarSketch מקווה שנהניתן/ם ולמדתן/ם הרבה בעזרת כלי זה :) יש עוד מה לגלות ולחקור בפרקי הבחירה!

////
Thank you video
////


[[chapter9summary]]
=== סיכום פרק תשיעי

[role="curriculum-python"]
* *רשימה (list)* היא אוסף סדור של ערכים. זו דרך יעילה לאחסן נתונים. הערכים המאוחסנים ברשימה, ונקראים איברי הרשימה, יכולים להיות מכל טיפוס נתונים שהוא.
* כמו במחרוזות, לאיברי הרשימה יש אינדקסים. האינדקסים מתחילים מ-0.
* הגישה לאיברי הרשימה היא בעזרת סוגריים מרובעים. למשל, `myList[1]`. לתווים במחרוזת ניתן לגשת בצורה דומה: `myString[1]`.
* הפונקציה `len()` מחזירה את מספר איברי הרשימה, או את מספר התווים במחרוזת. התחביר (syntax) הוא:`len(list)`.
* אפשר לשרשר ולחתוך רשימות בעזרת *אופרטורים של רשימות*, קבוצת אופרטורים לעיבוד רשימות.
* התחביר (syntax) ליצירת תת-רשימה מרשימה קיימת הוא: `newList = oldList[startIndex: endIndex]`.
* אפשר לחבר רשימות בעזרת אופרטור השרשור `+`. למשל, `newList = listA + listB`.
* `()makeBeat` יכולה ליצור מקצבים ממספר קליפים בו זמנית, עם היא מקבלת פרמטר עם רשימת הקליפים ומחרוזת תיפוף המתייחסת לקליפים השונים</0>. `()makeBeat` יכולה לגשת לקליפים באינדקסים 0 עד 9, בתנאי שהם מאוחסנים באותה רשימה.
* החלפת מידע בונה עם הזולת היא צורה של *משוב עמיתים*. משוב עמיתים מספק הזדמנות ללמוד מהזולת.


[role="curriculum-javascript"]
* *מערך (array)* היא אוסף סדור של ערכים. זו דרך יעילה לאחסן נתונים. הערכים המאוחסנים במערך, ונקראים איברי המערך, יכולים להיות מכל טיפוס נתונים שהוא.
* כמו במחרוזות, לאיברי המערך יש אינדקסים. האינדקסים מתחילים מ-0.
* הגישה לאיברי המערך היא בעזרת סוגריים מרובעים. למשל, `myArray[1]`. לתווים במחרוזת ניתן לגשת בצורה דומה: `myString[1]`.
* התכונה `length` מחזירה את מספר איברי המערך, או את מספר התווים במחרוזת. התחביר (syntax) הוא `array.length` או `string.length`.
* אפשר לשרשר ולחתוך מערכים בעזרת *אופרטורים של מערכים*, קבוצת כלים לעיבוד מערכים.
* התחביר (syntax) ליצירת תת-מערך ממערך קיים הוא: `newArray = oldArray.slice(startIndex, endIndex)`.
* התחבר (syntax) ליצירת תת-מחרוזת ממחרוזת קיימת הוא: `newString = oldString.substring(startIndex, endIndex)`.
* אפשר לחבר מערכים בעזרת השיטה `concat()`. למשל, `newArray = arrayA.concat(arrayB)`.
* `()makeBeat` יכולה ליצור מקצבים ממספר קליפים בו זמנית, עם היא מקבלת פרמטר עם מערךהקליפים ומחרוזת תיפוף המתייחסת לקליפים השונים</0>. `()makeBeat` יכולה לגשת לקליפים באינדקסים 0 עד 9, בתנאי שהם מאוחסנים באותו מערך.
* החלפת מידע בונה עם הזולת היא צורה של *משוב עמיתים*. משוב עמיתים מספק הזדמנות ללמוד מהזולת.


[[chapter-questions]]
=== שאלות

[question]
--
מי מהפעולות הבאות משמשת לצירוף של רשימות/מערכים?
[answers]
* שרשור
* חיתוך
* הדבקה
* חיבור
--

[role="curriculum-python"]
[question]
--
מהו האינדקס של האיבר הראשון ברשימה בפייתון?
[answers]
* `0`
* `1`
* `2`
* `1-`
--

[role="curriculum-python"]
[question]
--
מה מחזירה `len(myList)`?
[answers]
* מספר האיברים ב-`myList`
* טיפוס הנתונים של`myList`
* האיברים של`myList`
* הרוחב של`myList`
--

[role="curriculum-python"]
[question]
--
מהו התחביר לשרשור שתי רשימות(`listA` ו-`listB`)?
[answers]
* `listA + listB`
* `listA ++ listB`
* `listA and listB`
* `listB + listA`
--

[role="curriculum-python"]
[question]
--
כיצד ניתן ליצור רשימה המכילה את כל איברי oldList, חוץ מהאיבר הראשון והאיבר האחרון?
[answers]
* `oldList[1:len(oldList)-1]`
* `oldList[1:len(oldList)]`
* `oldList[0:len(oldList)]`
* `oldList[2:len(oldList-1)]`
--

[role="curriculum-javascript"]
[question]
--
מהו האינדקס של האיבר הראשון במערך ב-Javascript?
[answers]
* `0`
* `1`
* `2`
* `1-`
--

[role="curriculum-javascript"]
[question]
--
מה ערכו של `myArray.length`?
[answers]
* מספר האיברים ב-`myArray`
* טיפוס הנתונים של `myArray`
* האיברים של`myArray`
* הרוחב של `myArray`
--

[role="curriculum-javascript"]
[question]
--
מה התחביר (syntax) לשרשור שני מערכים (`arrayA` ו- `arrayB`)?
[answers]
* `arrayA.concat(arrayB)`
* `arrayA.concatenate(arrayB)`
* `arrayB.concat(arrayA)`
* `arrayB.concatenate(arrayB)`
--

[role="curriculum-javascript"]
[question]
--
כיצד ניתן ליצור מערך מאיברי `oldArray` ללא האיבר הראשון והאיבר האחרון?
[answers]
* `oldArray.slice(1,oldArray.length-1]`
* `oldArray.slice(1,oldArray.length)`
* `oldArray.slice(0,oldArray.length)`
* `oldArray.slice(2:oldArray.length-1)`
--
