[[customfunctionssongstructure]]
== Custom Functions and Song Structure

:nofooter:

The song structure is the song's organization over time. The goal is to create meaningful sections and transitions for the flow of your music. In this chapter, you'll create your own function, custom functions, to structure your songs!

[[asongsstructure]]
=== A song's structure

:nofooter:

A song can be divided into *sections*. קטע מורכב ממספר תיבות והוא מבטא רעיון או תחושה. Usually, musicians try to add contrast between different sections. _Intro, Verse, Chorus_, and _Outro_ are examples of sections.

A common and simple *form*, or song structure, is ABA. הקטעים A ו-B הם שני קטעים שונים. למשל, בית ופזמון. קטע B מוסיף גיוון, והחזרה לקטע A שומרת אחידות ומעוררת תחושה של חזרה למשהו מוכר ובטוח. הקוד בהמשך יוצר שיר במבנה ABA. Section B features contrasting sounds to Section A - a slower and louder bass, and an additional rattling:

[[imediau2sections_052016png]]
.מבנה ABA ב-DAW
[caption="Figure 9.2: "]
image::../media/U2/sections_052016.png[Alt Text]

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-a-b-a-form.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-a-b-a-form.js.txt[]
----

{nbsp} +

.תרגלו
****
בחרו שיר והאזינו לו. נסו להבחין בקטעים השונים. האם הצלחתן/ם להבחין מתי השיר עובר מקטע לקטע? How many times do you hear the chorus and verse? What kind of contrasts can you observe? שתפו את השיר עם חבר/ה.
****

Keep in mind that a musical phrase sounds most natural when sounds are arranged into groups of two, four, eight, sixteen, etc. So your sections should preferably have a size of two, four, eight, or sixteen measures.

[[creatingyourcustomfunctions]]
=== הגדירו פונקציות

בדוגמה הקודמת של שיר במבנה ABA, הקוד ארוך, וחוזר על עצמו בקטע A השני. There is a way to be more concise, thanks to *custom functions*! נגדיר פונקציה שתיצור את קטע A, ונקרא לה פעמיים.

The difference with functions that you have used like `fitMedia()`, is that `fitMedia()` is already pre-defined by our team to play a sound. In a custom function, you get to define exactly what it does. כך נגדיר את הפונקציה:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-untitled1.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-untitled1.js.txt[]
----

. `sectionA()` is the name we chose for our function. You can choose any name you like. הקפידו לבחור בשם תיאורי, כך שהקוד יהיה קריא.
. The instructions are the *body* of the function. הן מוזחות ימינה.

.תרגלו
****
העתיקו והדביקו את הקוד בסקריפט חדש. הריצו את הקוד. שימו לב לכך שה-DAW נשאר ריק.
That's because you need to *call* a function to use it.
To call your function, add the line `sectionA()`, unindented, after your function definition. כשתריצו את הקוד תראו את קטע A ב-DAW.
****

Now we want to add section A from measures nine to thirteen. However, when we call `sectionA()`, the sounds are placed from measures one to five. To remedy this issue, we will create *parameters* for our function.

.תרגלו
****
In your current script you created for the previous practice problem:

1. Add the parameters `startMeasure` and `endMeasure` separated by a comma between the parentheses of the sectionA function in its definition like this: `sectionA(startMeasure,endMeasure)`.
1. In the function's body, replace the start measure (`1`) and end measure (`5`) by `startMeasure` and `endMeasure` respectively.
1. When you call your function, add the parameters `1` and `5` between the parentheses. הריצו את הקוד וודאו שאין בו שגיאות.
1. Add a second function call, this time with the parameters `9` and `13`. הריצו את הקוד וודאו שאין בו שגיאות.
1. Define a function for section B, using the same process, and call section B from measures five to nine and from measures thirteen to seventeen.
****

כך אמור להראות הקוד:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-a-b-a-b-form-and-custom-functions.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-a-b-a-b-form-and-custom-functions.js.txt[]
----

//The following video will be cut in 2 with the beginning going to chapter 7.1, and the end to this chpater. For more info see https://docs.google.com/spreadsheets/d/114pWGd27OkNC37ZRCZDIvoNPuwGLcO8KM5Z_sTjpn0M/edit#gid=302140020//

[role="curriculum-python curriculum-mp4"]
[[video93py]]
video::./videoMedia/009-03-CustomFunctions-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video93js]]
video::./videoMedia/009-03-CustomFunctions-JS.mp4[]

[[transitionstrategies]]
=== אסטרטגיות מעבר

Now that you know how to create custom functions to structure your song, let's look at transitions. *Transitions* help one section smoothly go into the next. מעברים יכולים לחבר בית ופזמון, לטפס עד לנפילה, לערבל ערוצים או להחליף סולם (key). The goal of a transition is to grab the listener's attention and let them know a change is about to occur.

להלן מספר דרכים ליצירת מעברים מוסיקליים:

. *Crash Cymbal*: Placing a crash cymbal on the first beat of a new section.
. *Drum Fill*: A rhythmic variation to fill the gap before a new section.
. *Track Silencing*: Silence some tracks temporarily for dramatic effect.
. *Melody Variation*: Introducing a variation of the chords, bass line, or melody before the new section. לעיתים קרובות, תיקייה בתוך ספריית הצלילים של EarSketch מכילה וריאציות לריף.
. *Riser*: A note or noise that increases in pitch. It is very common in EDM (Electronic Dance Music) and creates an anticipation of a drop. אפשר לחפש "riser" בדפדפן הצלילים. קול מצילה הפוך יכול לשמש כ-riser. לדוגמה: YG_EDM_REVERSE_CRASH_1.
. *Snare Roll*: A sequence of repeated snare hits, with increasing density, pitch, or amplitude. You can use a sound like RD_FUTURE_DUBSTEP_FILL_1 or HOUSE_BREAK_FILL_003, or with `makeBeat()`.
. *Looping*: Repeating a short segment of melody before a new section.
. *Crossfading*: Decreasing the volume of one section while increasing the volume of a new section.
. *Anacrusis*: When the melody of the new section starts a couple beats early.

.תרגלו
****
Looking at this list of possible transitions, select two of them and try to see how you could implement them using code. עבדו בזוגות, זה יכול לעזור. Once you've thought about it, you can have a look at the examples below.

The transition should be placed one or two measures before the new section. תוכלו להשתמש במספר טכניקות מעבר מעבר בו-זמנית.
****

מעבר תופים:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-drum-fill.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-drum-fill.js.txt[]
----

The track silencing technique only requires the modification of a couple `fitMedia()` calls. ראו את הדוגמה למטה.

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-track-droupouts.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-track-droupouts.js.txt[]
----

הדוגמה הבאה משתמשת במרימים (risers) ובמצילה (crash cymbal) במעבר.

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-transition-techniques-risers.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-transition-techniques-risers.js.txt[]
----

{nbsp} +

[[yourfullsong]]
=== השיר בשלמותו

In programming we can create *abstractions*, the bundling of ideas to form a single concept. In music, we group musical ideas into sections. פונקציות הן סוג של הפשטה במדעי המחשב. הן מחברות מספר הוראות לכלי אחד שאפשר להשתמש בו בקלות. הפשטות כאלה מסייעות להבהיר את מבנה התוכנית.

.תרגלו
****
Let's create a full song using all the tools you've discovered in EarSketch! הנה הצעה לדרך העבודה על השיר. תוכלו להתאים את דרך העבודה כך שתהיה נוחה לכן/ם:

. בחרו נושא, או מסר, לשיר. Think about the type of sounds, instruments, or lyrics that will best convey your message.
. בחרו מבנה פשוט לשיר.
. ולסיום, התחילו לכתוב קוד! Start with some `fitMedia()` functions to select sounds.
. Use `makeBeat()` to add some percussion.
. תוכלו להעלות לספריית הצלילים קליפים שלכם.
. Use `for` loops to reduce repetition in your code.
. Use custom functions to define your sections and create your song structure.
. Add one or two meaningful transitions.
. Add effects with `setEffect()`.
. הוסיפו הוראות תנאי (if).
. Make sure you use variables to store some information such as sound constants.
. אל תשכחו להשתמש בהערות כדי להסביר מה עשיתם.
. Don't forget to regularly run your code and listen to your song. שנו את השיר עד שהוא יביע את רצונכן/ם.
. בחרו שם לשיר.
****

הנה דוגמה לשיר:

[role="curriculum-python"]
[source,python]
----
include::code-examples/custom-functions-total-atlanta-song-of-summer.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/custom-functions-total-atlanta-song-of-summer.js.txt[]
----

In this example, we have used a `for` loop inside a custom function! We have used parameters of the function (`start` and `end`) inside the for loop.

[[chapter7summary]]
=== סיכום פרק שביעי

* *Sections* are related musical units consisting of multiple measures. כל קטע מביע רעיון או רגש מסוימים.
* *Transitions* are passages of music used to connect consecutive musical sections.
* The structure and variety found within a song is known as its *form*. צורה נפוצה היא ABA.
* *Custom functions* are unique functions written by the programmer to accomplish a specific task. יש להגדיר את הפונקציה לפני שקוראים לה. You can create as many parameters as you want.
* An *abstraction* is the bundling of ideas to form a single, often less complex, concept. פונקציות הן דוגמה להפשטה.

[[chapter-questions]]
=== שאלות

[question]
--
מי מהבאים אינו דוגמה לקטע מוסיקלי?

[answers]
* תופים
* פתיחה
* בית
* פזמון
--

[question]
--
מהי הפשטה (אבסטרקציה)?

[answers]
* חיבור של מספר רעיונות למושג אחד
* מגוון של צלילים לאורך הקטע
* חלקים של השיר שקשורים זה לזה, אך גם נבדלים זה מזה
* הוראה שמחזירה ערך לקריאת הפונקציה
--

[role="curriculum-python"]
[question]
--
Which of these options correctly defines the function `myFunction()` with the parameters `startMeasure` and `endMeasure` ?

[answers]
* `def myFunction(startMeasure, endMeasure):`
* `def myFunction():`
* `myFunction(startMeasure, endMeasure):`
* `myFunction(2, 5)`
--

[role="curriculum-javascript"]
[question]
--
Which of these options correctly defines the function `myFunction()` with the parameters `startMeasure` and `endMeasure` ?

[answers]
* `function myFunction(startMeasure, endMeasure) {}`
* `function myFunction() {}`
* `myFunction(startMeasure, endMeasure){}`
* `myFunction(2, 5)`
--

[question]
--
מי מהבאים אינו דוגמה למעבר?

[answers]
* עקביות (קונסיסטנטיות) של המלודיה
* מצילה
* "מרים" (riser)
* Track Silencing
--