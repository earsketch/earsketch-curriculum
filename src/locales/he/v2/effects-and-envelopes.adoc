[[effectsandenvelopes]]
== אפקטים ומעטפות

:nofooter:

EarSketch lets the composer alter existing sounds to produce new and unique sounds. This is achieved through the `setEffect()` function, the focus of this chapter.

[[effectsinearsketch]]
=== Use Effects in EarSketch

:nofooter:

*Effects* allow us to change qualities of sounds. בדומה לאופן בו פילטרים משנים תמונה, הוספת אפקט משנה את הצליל. For example, you can change the volume, add some echo or reverb, etc.

[role="curriculum-python curriculum-mp4"]
[[video4py]]
video::./videoMedia/004-01-UsingEffectsinEarSketch-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video4js]]
video::./videoMedia/004-01-UsingEffectsinEarSketch-JS.mp4[]

We use the function `setEffect()`, which takes four arguments, similar to `fitMedia()`:

. *track*: Track number or `MIX_TRACK`
. *type*: Effect constant, like `DELAY`
. *parameter*: Parameter constant, like `DELAY_TIME`
. *value*: Parameter value, like `200`. This value must be within the effect's range.

.תרגלו
****
Write a new song with two tracks and modify the volume for both of the tracks using the `setEffect()` function.
In that case, the effect name (second argument) is `VOLUME`, and the effect parameter (third argument) is `GAIN`. The effect value (fourth argument) is a number of decibels (dB), between `-60` and `+12`.
****

הנה דוגמה:

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-volume-effect.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-volume-effect.js.txt[]
----

We've seen the `VOLUME` effect. Let's now look at `DELAY`. Listen to the 2 clips below, one without and one with a *delay* effect applied.

ללא אפקט:

++++
<div class="curriculum-mp3">audioMedia/reference.mp3</div>
++++

עם אפקט delay:

++++
<div class="curriculum-mp3">audioMedia/delay2.mp3</div>
++++

In that case, the effect name (second argument) is `DELAY`, and the effect parameter (third argument) can either be `DELAY_TIME` (how long before the echo "answers") or `DELAY_FEEDBACK` (how loud your echo is). The value of `DELAY_TIME` is in milliseconds (1000 milliseconds is one second) and the value of `DELAY_FEEDBACK` is a number between `-120` and `-1`.

For example, `setEffect(1, DELAY, DELAY_TIME, 500)` puts a delay onto track 1 with the delay/echo lasting for 500 ms.

.תרגלו
****
. Read about the delay effect in the list of effects chapter here: <</en/v1/every-effect-explained-in-detail#,effects>>
. הריצו את הקוד שמופיע בהמשך והקשיבו למוסיקה ללא אפקטים
. Then uncomment the first `setEffect()` line and listen to the difference
. Then uncomment the second `setEffect()` line and listen to the difference ("uncomment" means to erase the comment syntax, `#` or `//` from a block of code)
Note that the delay time, 500ms, is the length of one beat. מכיוון שהטמפו הוא 120bpm, יש ביט כל חצי שניה (1/2=60/120). שנייה אחת היא 1000 מילישניות, וחצי שנייה היא 500 מילישניות.
שנו את זמן ההשהיה. האם המוסיקה נשמעת טוב יותר או לא?
****

{nbsp} +

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-delay-effect.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-delay-effect.js.txt[]
----

{nbsp} +

[[functionsandmoreeffects]]
=== פונקציות ועוד אפקטים

So far, you've been using several functions in EarSketch like `fitMedia()` or `setEffect()`. שימו לב לכך, ששם של פונקציה תמיד מתחיל באות קטנה, והוא, לרוב, פועל. The parentheses tell the computer to *call*, or *execute*, the function. *Arguments*, or parameters, between the parentheses are separated by commas.

[role="curriculum-python"]
* `setTempo()`, `fitMedia()`, `makeBeat()`, and now `setEffect()` take arguments. They are part of the EarSketch *Application Programming Interface*, or *API*. ה-API של EarSketch מוסיף יכולות מוסיקליות לפייתון. דוגמה נוספת ל-API הוא ה-API של Googie Maps: אוסף כלים לשיבוץ מפות באתרים או יישומים.
* In a later chapter, you'll also learn how to create your own custom functions.

[role="curriculum-javascript"]
* `setTempo()`, `fitMedia()`, `makeBeat()`, and now `setEffect()` take arguments. They are part of the EarSketch *Application Programming Interface*, or *API*. ה-API של EarSketch מוסיף יכולות מוסיקליות ל-JavaScript. דוגמה נוספת ל-API הוא ה-API של Googie Maps: אוסף כלים לשיבוץ מפות באתרים או יישומים.
* In a later chapter, you'll also learn how to create your own custom functions.

כל פרמטר של פונקציה יכול להיות מטיפוס נתונים שונה. סדר הפרמטרים חשוב. הנה מספר דוגמאות לטיפוסי נתונים:

* *Numbers*
** *Integers* are whole numbers, like 0, 5, or -26. Example: track numbers
** *Floating point* numbers are rational numbers like 0.125 or -21.0. Example: volume of -4.2dB
* *Strings* represent text. Example: `"0000----0000----"`

Now, let's play more with the `setEffect()` function. קטע הווידאו הבא מראה כיצד להשתמש במספר אפקטים:

////
VIDEO IS BEEING MADE
more info here: https://docs.google.com/spreadsheets/d/114pWGd27OkNC37ZRCZDIvoNPuwGLcO8KM5Z_sTjpn0M/edit#gid=302140020
("videos revamping" tab)
////

*Reverb* (short for reverberation) is sound bouncing off walls and returning to your ears. הוא נותן תחושה של מרחב לצליל. חשבו על ההבדל בין דיבור בחדר קטן לדיבור בחלל של אולם גדול. ככל שהחדר גדול יותר, לוקח לצליל יותר זמן לחזור מהקירות לאוזניכם/ן, ונוצר הצליל המהדהד של אולם גדול. The `REVERB` effect has parameters to control the decay time (`REVERB_DECAY`) and amount of the effect present (`MIX`).

הקשיבו לקליפים הבאים, ושמעו את התוצאה של הוספת reverb לערוץ:

ללא אפקט:

++++
<div class="curriculum-mp3">audioMedia/reverbReference.mp3</div>
++++

עם אפקט reverb:

++++
<div class="curriculum-mp3">audioMedia/reverbEffect.mp3</div>
++++

{nbsp} +

.תרגלו
****
Go to <</en/v1/every-effect-explained-in-detail#,this chapter>> for a complete list of effects.
Create a song with a volume effect and two other effects. Don't forget to write what you are doing in the comments and to create variables when necessary.
****

[[effectsandenvelopes2]]
=== אפקטים ומעטפות

You've started using effects, and maybe you'd like for one effect to change over time. For example, you might want a fade in (volume getting higher) at the beginning of your song.

*Envelopes* allow us to define how an effect changes over time.

We will use two value-time pairs. כל זוג כולל ערך של אפקט ותיבה מתאימה. For example, `(-60, 1, 0, 3)` means a point is placed at value `-60` at measure `1`, and another point is placed at value `0` at measure `3`. The envelope creates a line between these points, called a *ramp*:

[[envelopepoints]]
.מעטפת (עם הערות) ב-EarSketch
[caption="Figure 5.3.1: "]
image::../media/U2/NewEnvelope.png[Alt Text]

To change an envelope, you just need the `setEffect()` function with seven arguments (the last four arguments are the two value-time pairs):

. track
. type
. parameter
. startValue
. start
. endValue
. end

The last three out of seven parameters are *optional parameters*. If left unspecified, as was the case when we used `setEffect()` with only four parameters, the effect is applied to the entire track.

הנה דוגמה של fade in:

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-envelopes.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-envelopes.js.txt[]
----

צפו בסרטון הבא המדגים מעטפות נוספות

[role="curriculum-python curriculum-mp4"]
[[video5b]]
video::./videoMedia/005-03-MoreEffectsB-PY.mp4[]

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-complex-envelopes.py.txt[]
----

[role="curriculum-javascript curriculum-mp4"]
video::./videoMedia/005-03-MoreEffectsB-JS.mp4[]

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-complex-envelopes.js.txt[]
----

{nbsp} +

.תרגלו
****
צרו שיר חדש. Use one `for` loop to add an envelope to all the tracks (for example: fade in and fade out for all your tracks), or to repeat an effect on the same track. השתמשו באיזה אפקט שתרצו.
השמיעו את השיר לחבר/ה, עם ובלי האפקט (כדי "לבטל" את האפקט, הפכו את השורות בקוד שמגדירות את האפקט להערות). על החבר/ה לנחש מהו האפקט.
****

Below is an example of the above practice. כל איטרציה של הלולאה מוסיפה קטע באורך של תיבה אחת של המעטפת. Automating the GAIN parameter creates rhythmic volume fades. נסו לכבות ולהפעיל את האפקט ב-DAW כדי לשמוע את השפעת האפקט (בעזרת כפתור "bypass" משמאל לערוץ האפקט ב-DAW).

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-rhythmic-ramps.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-rhythmic-ramps.js.txt[]
----

And here is an example of fade in and fade out on all the tracks:

[role="curriculum-python"]
[source,python]
----
include::code-examples/effects-and-envelopes-fade-in-and-fade-out.py.txt[]
----

[role="curriculum-javascript"]
[source,javascript]
----
include::code-examples/effects-and-envelopes-fade-in-and-fade-out.js.txt[]
----

{nbsp} +

[[chapter5summary]]
=== סיכום פרק חמישי

* *Effects* change the qualities of a sound to make them unique.
* *Volume* is related to loudness. *Delay* creates an echo. *Reverb* makes it feel like the sound is played in a large room. *Panning* places your music on the left or right side.
* Effects are implemented in EarSketch with the `setEffect()` function. Its syntax is `setEffect(track, type, parameter, value)`.
. *track*: Track number or `MIX_TRACK`
. *type*: Effect constant, like `DELAY`
. *parameter*: Parameter constant, like `DELAY_TIME`
. *value*: Parameter value, like `200`. This value must be within the effect's range.
* *Functions* contain instructions for the computer to execute. Data is sent to functions by *arguments*, which affect how the function executes. The syntax of a function *call* with two arguments is `myFunction(argument1, argument2)`. An example of syntax used in a function *call* with 4 arguments is `makeBeat(kick, 2, measure, kickBeat)`.
* A complete list of EarSketch effects and their parameters can be found in <</en/v1/every-effect-explained-in-detail#,effects>>, along with descriptions for each.
* *Envelopes* define how an effect parameter changes over time. They are described with value-time pairs, like _(value, time, value, time)_.
* For an envelope, the 7-parameter `setEffect()` arguments are: `setEffect(track, type, parameter, startValue, start, endValue, end)`.

[[chapter-questions]]
=== שאלות

[question]
--
מה אפקט מאפשר לעשות ב-EarSketch?

[answers]
* שינוי האיכויות של צליל בפרויקט
* הוספת צליל לערוץ
* שינוי ביט תיפוף
* שינוי הטמפו של ערוץ
--

[question]
--
Which of these is NOT a `setEffect()` argument?

[answers]
* Clip Name
* Effect Name
* Effect Value
* Track Number
--

[question]
--
כיצד ניתן לקבוע את זמן ההשהיה (delay time) של אפקט delay, בערוץ השלישי, ל-50 מילישניות?

[answers]
* `setEffect(3, DELAY, DELAY_TIME, 50.0)`
* `setEffect(DELAY, 3, DELAY_TIME, 50.0)`
* `fitMedia(DELAY, 3, DELAY_TIME, 50.0)`
* `setEffect(50, DELAY_FEEDBACK, 1)`
--

[question]
--
Which of the following is not a parameter used with `setEffect()` envelopes?

[answers]
* Clip Length
* Start Value
* Track Number
* Effect
--

[question]
--
What would the following `setEffect()` function do?

[source,python]
----
setEffect(1, DISTORTION, DISTO_GAIN, 0, 1, 50, 11)
----

[answers]
* מגדילה את כמות הדיסטורשן בערוץ הראשון לאורך 10 תיבות.
* מקטינה את כמות הדיסטורשן בערוץ הראשון לאורך 50 תיבות.
* מגבירה את הווליום של הערוץ הראשון לאורך 10 תיבות.
* מחלישה את הווליום של הערוץ הראשון לאורך 50 תיבות.
--