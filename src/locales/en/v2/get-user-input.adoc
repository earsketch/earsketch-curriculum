[[getuserinput]]
== Get User Input
:nofooter:

In this chapter, you will learn how to ask for input from users and adapt your music accordingly. For that, we'll look at return statements and the `readInput()` function.

[[returnstatement]]
=== Return Statement

Watch this video first:

[role="curriculum-python curriculum-mp4"]
[[video131py]]
video::./videoMedia/013-01-ReturnStatements-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video131js]]
video::./videoMedia/013-01-ReturnStatements-JS.mp4[]

* In addition to taking some input (parameters), functions can output a value. In programming, we call this returning a value. 
* The *return statement* is a statement inside the function body that: A. tells a function to return a value when called. B. signals the function to stop. If you have any statements after the `return` keyword, they will be ignored.
* To use the value that is returned by the function, create a variable and assign it the function call.
* A return statement is not compulsory. Without a return statement a function does not output any value. `fitMedia()` and `setEffect()` are examples of functions that don't return anything.

Here is a code example:

[role="curriculum-python"]
[source,python]
----
# Return Statements: Linking two beats together with return statements

# Setup
from earsketch import *
setTempo(100)

rhythm1 = "0+++0+0+0+--0+00"
rhythm2 = "0+0-00++0-000+++"

# Music
def createBeat(startMeasure, soundClip, beatString):
    endMeasure = startMeasure + 3
    for measure in range(startMeasure, endMeasure):
        makeBeat(soundClip, 1, measure, beatString)

    # Return ending measure so we can use it outside function
    return endMeasure

# Function calls
# Assigning the value we return to a variable
newStart = createBeat(1, HIPHOP_DUSTYGROOVE_007, rhythm1)

# Passing the returned value into another function
createBeat(newStart, HIPHOP_DUSTYGROOVE_010, rhythm2)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Return Statements: Linking two beats together with return statements

// Setup
setTempo(100);

var rhythm1 = "0+++0+0+0+--0+00";
var rhythm2 = "0+0-00++0-000+++";

// Music
function createBeat(startMeasure, soundClip, beatString) {
    var endMeasure = startMeasure + 3;
    for (var measure = startMeasure; measure < endMeasure; measure++) {
        makeBeat(soundClip, 1, measure, beatString);
    }

    // Return ending measure so we can use it outside function
    return endMeasure;
}

// Function calls
// Assigning the value we return to a variable
var newStart = createBeat(1, HIPHOP_DUSTYGROOVE_007, rhythm1);

// Passing the returned value into another function
createBeat(newStart, HIPHOP_DUSTYGROOVE_010, rhythm2);
----

With the return statement, the complete control flow for a function looks like this:

[[return]]
.Return statement control flow
[caption="Figure 8.1.1: "]
image::../media/U2/Return.png[Alt Text]

.PRACTICE
****
Create a function that will implement a musical section with:

* Only one parameter, called `start`, which represents the start measure.
* One return statement that returns the end measure.
* A body function with `fitMedia()` functions.

Your section can last as many measures as you like.
Then call the function, and print the end measure.
****

Here is an example:

[role="curriculum-python"]
[source,python]
----
# Return Statements 2: Returning the end measure of a section function

# Setup
from earsketch import *
setTempo(120)

melody1 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_1
drums1 = RD_WORLD_PERCUSSION_DRUMPART_24

# Function definition
def verse(start):
    end = start + 4
    fitMedia(melody1, 1, start, end)
    fitMedia(drums1, 2, start, end)
    return end

# Function calls
endMeasure = verse(1)  # calling verse function and start is measure 1
print(endMeasure)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Return Statements 2: Returning the end measure of a section function

// Setup
setTempo(120);

var melody1 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_1;
var drums1 = RD_WORLD_PERCUSSION_DRUMPART_24;

// Function definition
function verse(start) {
    var end = start + 4;
    fitMedia(melody1, 1, start, end);
    fitMedia(drums1, 2, start, end);
    return end;
}
// Function calls
var endMeasure = verse(1); // calling verse function and start is measure 1
println(endMeasure);
----

{nbsp} +

.PRACTICE
****
Let's say you have a section A, but you want it to vary slightly when it's called at different moments of the song. You will create a function called `sectionA()` with 2 `fitMedia()` calls.

The function should take 2 parameters: `start` and a boolean parameter `variation` that will allow the user to choose a variation when calling the function. 

In the function body, you should have a conditional statement which will evaluate the parameter. Depending on the parameter value, you will change the sound clip used in one of your `fitMedia()` calls.

Then call the function at different measures with different variations. 
****

Here is an example code:

[role="curriculum-python"]
[source,python]
----
# Conditional statement: Using a boolean to create variation in a function

# Setup
from earsketch import *
setTempo(120)

melody1 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_1
melody2 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_2
drums1 = RD_WORLD_PERCUSSION_DRUMPART_24

# Function definition
def verse(start, variation):
    # variation is either equal to True or False
    if variation:
        fitMedia(melody1, 1, start, start + 4)
    else:
        fitMedia(melody2, 1, start, start + 4)
    fitMedia(drums1, 2, start, start + 4)  # this is outside the conditional statement (no indentation)

# Function calls
verse(1, True)
verse(7, False)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Conditional statement: Using a boolean to create variation in a function

// Setup
setTempo(120);

var melody1 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_1;
var melody2 = RD_WORLD_PERCUSSION_KALIMBA_PIANO_2;
var drums1 = RD_WORLD_PERCUSSION_DRUMPART_24;

// Function definition
function verse(start, variation) {
    // variation is either equal to true or false
    if (variation) {
        fitMedia(melody1, 1, start, start + 4);
    } else {
        fitMedia(melody2, 1, start, start + 4);
    }
    fitMedia(drums1, 2, start, start + 4); // this is outside the conditional statement (no indentation)
}

// Function calls
verse(1, true);
verse(7, false);
----

{nbsp} +

[[userinput]]
=== Get User Input

We'll see how to ask for user input when the "run" button is pressed. This is possible thanks to the `readInput()` function. This function takes as a parameter a string (like "what tempo would you like for your music?"). When the user runs the code, they will see a new window with the string and are prompted to write an answer. The `readInput()` function returns what the user types there.

For example, copy the following code in a new script, and run it:

[role="curriculum-python"]
[source,python]
----
answer = readInput("What tempo would you like for your music?")
print(answer)
----

[role="curriculum-javascript"]
[source,javascript]
----
var answer = readInput("What tempo would you like for your music?");
println(answer);
----

We might need to convert the returned user input into a different data type. Here are useful functions:

[role="curriculum-python"]
* `str()` - converts any value into a string.
* `int()` - converts a string containing digits into an integer (for example: `"3"` becomes `3`).
* `float()` - convert a string containing digits with a decimal point into a float (for example: `"3.5"` becomes `3.5`).

[role="curriculum-javascript"]
* `String()` - converts any value into a string. Note that, for once, it's a function name that starts with an uppercase letter.
* `Number()` - converts a string into a number (for example: `"3.5"` becomes `3.5`).

In the example below, console input is used to determine the tempo of the song. We make sure to convert user input into an integer. 

[role="curriculum-python"]
[source,python]
----
# User input 1: Asking the user for the tempo

# Setup
from earsketch import *

# asking for tempo
question = "What tempo would you like for your music? Choose a number between 45 and 220"
answer = readInput(question)

# converting to an integer
tempo = int(answer)

# setting the tempo
setTempo(tempo)

# music
fitMedia(COMMON_LOVE_THEME_STRINGS_1, 1, 1, 5)
----

[role="curriculum-javascript"]
[source,javascript]
----
// User input 1: Asking the user for the tempo

// Setup

// asking for tempo
var question = "What tempo would you like for your music? Choose a number between 45 and 220";
var answer = readInput(question);

// converting to a number
var tempo = Number(answer);

// setting the tempo
setTempo(tempo);

// music
fitMedia(COMMON_LOVE_THEME_STRINGS_1, 1, 1, 5);
----

Here is another example of what you can do with user input. 

*Concatenation* is a means to link strings together, using the `+` symbol.  For example, concatenating the strings `"hello"` and `"world"` yields `"helloworld"`. In the following example, the user is prompted to specify a clip number. The number is concatenated with `DUBSTEP_BASS_WOBBLE_0` to form a complete clip name like `DUBSTEP_BASS_WOBBLE_010`.

[role="curriculum-python"]
[source,python]
----
# User input 2: Creating a dubstep song with user-specified parameters

# Setup
from earsketch import *
setTempo(120)

# Music
clipNumber = readInput("Type a clip number between 10 and 46: ")
dubstepClip = "DUBSTEP_BASS_WOBBLE_0"
finalClip = dubstepClip + clipNumber

# user-selected dubstep wobbles
fitMedia(finalClip, 1, 1, 5)
----

[role="curriculum-javascript"]
[source,javascript]
----
// User input 2: Creating a dubstep song with user-specified parameters

// Setup
setTempo(120);

// Music
var clipNumber = readInput("Type a clip number between 10 and 46: ");
var dubstepClip = "DUBSTEP_BASS_WOBBLE_0";
var finalClip = dubstepClip + clipNumber;

// user-selected dubstep wobbles
fitMedia(finalClip, 1, 1, 5);
----

{nbsp} +

.PRACTICE
****
Ask for a user input to modify something in your song.

Here are ideas of tools you can use:

. string concatenation, 
. data conversion, 
. creating a specific parameter in a custom function
****

{nbsp} +

[[booleanlogic]]
=== Boolean Logic

We will now combine boolean logic and user input for another example of user interaction.

[role="curriculum-python"]
Let's first look at boolean logic. You know that *comparison operators* help create a boolean. For example, the operator `==` checks if 2 values are equal, and if so the boolean is set to `True`.

[role="curriculum-javascript"]
Let's first look at boolean logic. You know that *comparison operators* help create a boolean. For example, the operator `==` checks if 2 values are equal, and if so the boolean is set to `true`. 

Now let's look at *boolean operators*: these help combine several booleans. There are 3 boolean operators:

[role="curriculum-python"]
* `and`: takes 2 boolean inputs and returns `True` only when both inputs are `True`, otherwise returns `False`.
* `or`: takes 2 boolean inputs and returns `True` when at least 1 input is `True`, otherwise returns `False`.
* `not`: takes 1 boolean input and returns the opposite (negated) boolean.

[role="curriculum-javascript"]
* `&&`: is called "and"; it takes 2 boolean inputs and returns `true` only when both inputs are `true`, otherwise returns `false`.
* `||`: is called "or"; it takes 2 boolean inputs and returns `true` when at least 1 input is `true`, otherwise returns `false`.
* `!`: is called "not"; it takes 1 boolean input and returns the opposite (negated) boolean.

For example if you are 16, the sentence "I'm 16" is true and the sentence "I'm 17" is false. "I'm 16 and I'm 17" (true and false) is false because you are not both 16 and 17. But the sentence "I'm 16 or I'm 17" (true or false) is true.

[role="curriculum-python"]
.PRACTICE
****
What do you think the following expressions evaluate to? `True` or `False`?

* `not True`
* `True and False`
* `True or False`
* `True and True`
* `(True and False) or True`
* `True and not False`
* `not (False or False)`
****

[role="curriculum-javascript"]
.PRACTICE
****
What do you think the following expressions evaluate to? `true` or `false`?

* `!true`
* `true && false`
* `true || false`
* `true && true`
* `(true && false) || true`
* `true && !false`
* `!(false || false)`
****

Use the following code to print the answers:

[role="curriculum-python"]
[source,python]
----
# Boolean expressions: printing boolean expressions

from earsketch import *

print(not True)
print(True and False)
print(True or False)
print(True and True)
print((True and False) or True)
print(True and not False)
print(not (False or False))
----

[role="curriculum-javascript"]
[source,javascript]
----
// Boolean expressions: printing boolean expressions

// Setup
setTempo(120);

println(!true);
println(true && false);
println(true || false);
println(true && true);
println((true && false) || true);
println(true && !false);
println(!(false || false));
----

Here is a reminder of boolean creation, and some examples of boolean operations:

[role="curriculum-python curriculum-mp4"]
[[video17apy]]
video::./videoMedia/Screencast-Ch17-2-PY.mp4[]

[role="curriculum-javascript curriculum-mp4"]
[[video17ajs]]
video::./videoMedia/Screencast-Ch17-2-JS.mp4[]


.PRACTICE
****
Now we will combine user input and boolean operations.

Write a script that will ask for the user to choose a genre, with a limited number of options (for example "hip hop" and "classical"). Depending on the user's answer, select a beat string that is works well with the genre. You can accept several possibilities. For example, "HIP HOP", "hip hop" and "Hip Hop" will output the same song.
****

Here is an example:
[role="curriculum-python"]
[source,python]
----
# Boolean operations: Asking user for genre and creating beat accordingly

from earsketch import *
setTempo(120)

# Sound variables
kick = OS_KICK02
hihat = OS_CLOSEDHAT04
clap = OS_CLAP03

# Beat string variables
hiphopKickBeat = "0++++---0+++0+++"
hiphopHihatBeat = "----0---00---000"
edmKickBeat = "0+++----0+++----"
edmClapBeat = "----0-------0---"

# Requesting user input
genre = readInput("What genre is your favorite? Hip Hop or EDM?")

# Creating the appropriate rhythm
if (genre == "Hip Hop") or (genre == "hip hop") or (genre == "HIP HOP"):
    makeBeat(kick, 1, 1, hiphopKickBeat)
    makeBeat(hihat, 2, 1, hiphopHihatBeat)
elif (genre == "edm") or (genre == "Edm") or (genre == "EDM"):
    makeBeat(kick, 1, 1, edmKickBeat)
    makeBeat(clap, 2, 1, edmClapBeat)
else:
    print("Sorry we couldn't read the genre you selected. Please run the code again.")

# Adding some reverb on track 2
setEffect(2, REVERB, MIX, 0.1)
----

[role="curriculum-javascript"]
[source,javascript]
----
// Boolean operations: Asking user for genre and creating beat accordingly

// Setup
setTempo(120);

// Sound variables
var kick = OS_KICK02;
var hihat = OS_CLOSEDHAT04;
var clap = OS_CLAP03;

// Beat string variables
var hiphopKickBeat = "0++++---0+++0+++";
var hiphopHihatBeat = "----0---00---000";
var edmKickBeat = "0+++----0+++----";
var edmClapBeat = "----0-------0---";

// Requesting user input
var genre = readInput("What genre is your favorite? Hip Hop or EDM?");

// Creating the appropriate rhythm
if ((genre == "Hip Hop") || (genre == "hip hop") || (genre == "HIP HOP")) {
    makeBeat(kick, 1, 1, hiphopKickBeat);
    makeBeat(hihat, 2, 1, hiphopHihatBeat);
} else if ((genre == "edm") || (genre == "Edm") || (genre == "EDM")) {
    makeBeat(kick, 1, 1, edmKickBeat);
    makeBeat(clap, 2, 1, edmClapBeat);
} else {
    println("Sorry we couldn't read the genre you selected. Please run the code again.");
}

// Adding some reverb on track 2
setEffect(2, REVERB, MIX, 0.1);
----

{nbsp} +

.CHALLENGE
****
This is the Jukebox challenge: write a script that will ask for user input in terms of genre, with 3 options (for example "latino", "trap" and "dubstep"). Depending on the user's answer, create a song that goes with the genre.
****

{nbsp} +

[[chapter8summary]]
=== Chapter 8 Summary

[role="curriculum-python"]
* *Return statements* can be included in a function definition to output a result when the function is called.
* `readInput()` will request a user input when you run your code. The only parameter is a string that the user will see. You can then use what the user has typed in your code, for example, to change the tempo or the genre of your music.
* Some functions allow you to convert data from one type to another. `str()` converts any value into a string.
`int()` converts a string containing digits into an integer. `float()` converts a string containing digits with a decimal point into a float.
* You can *concatenate* (link) strings together: "Hello"+"World" will evaluate to "HelloWorld".
* *Boolean logic* includes boolean operations. Here are boolean operators:
** `and`: takes 2 boolean inputs and returns `True` only when both inputs are `True`, otherwise returns `False`.
** `or`: takes 2 boolean inputs and returns `True` when at least 1 input is `True`, otherwise returns `False`.
** `not`: takes 1 boolean input and returns the opposite (negated) boolean.
* You now have many tools to introduce variations in your music: user input can determine elements. You can add a parameter in your custom functions to select a variation when you call your function.

[role="curriculum-javascript"]
* *Return statements* can be included in a function definition to output a result when the function is called.
* `readInput()` will request a user input when you run your code. The only parameter is a string that the user will see. You can then use what the user has typed in your code, for example, to change the tempo or the genre of your music.
* Some functions allow you to convert data from one type to another. For example, str() converts data into a string. `String()` converts any value into a string. Note that, for once, it's a function name that starts with an uppercase letter.  `Number()` converts a string into a number.
* You can *concatenate* (link) strings together: "Hello"+"World" will evaluate to "HelloWorld".
* *Boolean logic* includes boolean operations. Here are boolean operators:
** `&&`: is called "and", it takes 2 boolean inputs and returns `true` only when both inputs are `true`, otherwise returns `false`.
** `||`: is called "or": it takes 2 boolean inputs and returns `true` when at least 1 input is `true`, otherwise returns `false`.
** `!`: is called "not": it takes 1 boolean input and returns the opposite (negated) boolean.
* You now have many tools to introduce variations in your music: user input can determine elements. You can add a parameter in your custom functions to select a variation when you call your function.




[[chapter-questions]]
=== Questions

[question]
--
Which of the following would be considered an example of data type conversion?
[answers]
* Turning a string into a number.
* Storing a user-defined tempo in a variable.
* Using `readInput()` to ask a user for a genre.
* Producing a Boolean through a comparison operator.
--

[role="curriculum-python"]
[question]
--
What would the output of this block of code be (what would print to the console)?
[source,python]
----
not (True and (4 > 5))
----
[answers]
* `True`
* `5`
* `4`
* `False`
--

[role="curriculum-javascript"]
[question]
--
What would the output of this block of code be (what would print to the console)?
[source,javascript]
----
!(true && (4 > 5));
----
[answers]
* `true`
* `4`
* `false`
* `5`
--

[question]
--
Which of the following is an example of concatenation?
[answers]
* `x = beatstring1 + beatstring2`
* `x = beatstring1.beatstring2`
* `x = (beatstring1, beatstring2)`
* `x = beatstring1[beatstring2]`
--

[role="curriculum-python"]
[question]
--
How would you obtain the boolean True with the booleans True and False?
[answers]
* `True or False`
* `not True`
* `True and False`
* `true or false`
--

[role="curriculum-javascript"]
[question]
--
How would you obtain the boolean true with the booleans true and false?
[answers]
* `true||false`
* `!true`
* `true&&false`
* `True||False`
--
